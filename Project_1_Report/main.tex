    % --------------------------------------------------------------
% This is all preamble stuff that you don't have to worry about.
% Head down to where it says "Start here"
% --------------------------------------------------------------
 
\documentclass[12pt]{article}
 
\usepackage[margin=1in]{geometry} 
\usepackage{amsmath,amsthm,amssymb}
\usepackage{fancyhdr}
\usepackage{graphicx}
 
\newcommand{\N}{\mathbb{N}}
\newcommand{\Z}{\mathbb{Z}}
 
\newenvironment{theorem}[2][Theorem]{\begin{trivlist}
\item[\hskip \labelsep {\bfseries #1}\hskip \labelsep {\bfseries #2.}]}{\end{trivlist}}
\newenvironment{lemma}[2][Lemma]{\begin{trivlist}
\item[\hskip \labelsep {\bfseries #1}\hskip \labelsep {\bfseries #2.}]}{\end{trivlist}}
\newenvironment{exercise}[2][Exercise]{\begin{trivlist}
\item[\hskip \labelsep {\bfseries #1}\hskip \labelsep {\bfseries #2.}]}{\end{trivlist}}
\newenvironment{problem}[2][Problem]{\begin{trivlist}
\item[\hskip \labelsep {\bfseries #1}\hskip \labelsep {\bfseries #2.}]}{\end{trivlist}}
\newenvironment{question}[2][Question]{\begin{trivlist}
\item[\hskip \labelsep {\bfseries #1}\hskip \labelsep {\bfseries #2.}]}{\end{trivlist}}
\newenvironment{corollary}[2][Corollary]{\begin{trivlist}
\item[\hskip \labelsep {\bfseries #1}\hskip \labelsep {\bfseries #2.}]}{\end{trivlist}}

\newenvironment{solution}{\begin{proof}[Solution]}{\end{proof}}
 
\begin{document}
\pagestyle{fancy}
\fancyhf{}
\fancyhf[EHC]{Davis McKenzie - Signal Generator}
\fancyhf[EFC]{\thepage}
\fancyhf[OFC]{\thepage}
\fancyhf[OHC]{Davis McKenzie - Signal Generator}
% --------------------------------------------------------------
%                         Start here
% --------------------------------------------------------------
 
\title{Signal Generator, Sinusoidal}
\author{Davis McKenzie\\ %replace with your name
Analog Electronics}

\maketitle

\noindent The following report formulated for ELEC 3700 - Analog Electronics is laid out as follows:

\begin{enumerate} %the first video is required (but you don't have to watch it first), you can choose the other 4 from the list on the Course Materials page
\item Project Tasks 
\item Generator Overview and Component Groups
\item Final Schematic and Outcome
\end{enumerate}



\newpage

\section*{Project Tasks}
Design a signal generator capable of producing a sinusoidal output with an amplitude of either 0.1 V or 1 V and a frequency of 5 kHz. The generator must use an op-amp oscillator as the frequency originator.



% --------------------------------------------------------------
%     You don't have to mess with anything below this line.
% --------------------------------------------------------------

\section*{Generator Overview and Component Groups}
\subsection{Block Diagram}
Shown below is the block diagram outlining the general construction of the signal generator. Subsystems are shown below in the block diagram and are also highlighted in the final schematic.
\begin{figure}[h!] 
\centering 
\includegraphics[width=4.5in]{img/Screenshot 2024-12-04 030231.png} 
\label{fig:myPhoto1} 
\end{figure}
\subsection{Astable Multivibrator}
At the heart of this signal generator lies this op-amp-based astable multivibrator. This is where the output frequency is set, and a square wave is generated to be passed to further subsystems. The following equation governs the function of the multivibrator.

\begin{equation*}
    T =  2\cdot R_3\cdot C_3\cdot  ln\left(\frac{1+\beta}{1-\beta}\right)
\end{equation*}
Where T is the period and $\beta$ is:
\begin{equation*}
    \frac{R_2}{R_1 + R_2}
\end{equation*}
To begin, T was calculated by inverting the desired frequency. $R_1$ and $R_2$ were then chosen as equal values with values conducive to efficient op-amp function. Substituting and simplifying, the following equation is reached.
\begin{equation*}
    RC = \frac{0.0001}{ln(3)}
\end{equation*}
\newpage
This leaves on R and c as unknowns in the circuit. C was then picked as a round value which would lead to R lying within the list of acceptable components. The final components selected for the astable multivibrator are as follows:
\begin{equation*}
    R_1 = R_2 = 12\,k\Omega
\end{equation*}
\begin{equation*}
    R_3 = 7.5\,k\Omega
\end{equation*}
\begin{equation*}
    C_3 = 20\,nF
\end{equation*}

\subsection{Integrator}
The next step in producing a sinusoidal output waveform for the generator is by transforming the square wave generated by the multivibrator into a sawtooth wave. This can be achieved by passing the signal to an integrator. Suitable values for R and C were chosen to maintain a suitable output amplitude as governed by the equation below.
\begin{equation*}
    V_{out} = -\frac{1}{R_{in}\cdot C}\int^{t}_{0} V_{in} dt
\end{equation*}
The chosen values are as follows
\begin{equation*}
    R_4 = 100\,k\Omega
\end{equation*}
\begin{equation*}
    C_4 = 0.5\,nF
\end{equation*}

\subsection{Low-Pass Filter}
The low-pass filter is the final step in forming the sinusoidal output of the generator. The filter selects the fundamental frequency of the sawtooth wave and outputs a sinusoid matching this frequency. The components were selected to abide by the following equations:
\begin{equation*}
    A_v(s) = \frac{R_6}{R_5}\cdot \frac{1}{(1+sR_2C)} = \frac{R_6}{R_5}\cdot \frac{1}{(1+\frac{s}{\omega_H})}
\end{equation*}
where
\begin{equation*}
    \omega_H = 2\pi f_h = \frac{1}{R_2C}
\end{equation*}
Using these equations and a suitable frequency, the following component values were selected.
\begin{equation*}
    R_5 = 9.31\,k\Omega \;OR \;619\,\Omega
\end{equation*}
\begin{equation*}
    R_6 = 20\,k\Omega
\end{equation*}
\begin{equation*}
    C_6 = 2\,nF
\end{equation*}

\newpage
\section*{Final Schematic and Outcome}
Each component subsystem was then combined and the resulting completed signal generator is shown below.

\begin{figure}[h!] 
\centering 
\includegraphics[width=6.5in]{img/Signal Generator Schematic.png} 
\label{fig:myPhoto1} 
\end{figure}

A key component of the function generator is its ability to output a variable output amplitude. The selected output amplitudes (0.1 V and 1 V) have their output waveforms shown below.

\begin{figure}[h!] 
\centering 
\includegraphics[width=6in]{img/Screenshot 2024-12-04 045412.png} 
\label{fig:myPhoto1} 
\end{figure}
\newpage
\begin{figure}[h!] 
\centering 
\includegraphics[width=6in]{img/Screenshot 2024-12-04 045341.png} 
\label{fig:myPhoto1} 
\end{figure}

These output waveforms appear to be very pure sinusoids, but there is no way to visually confirm this. Therefore, an FFT was performed on the output. The resulting Plot is shown below.
\begin{figure}[h!] 
\centering 
\includegraphics[width=6in]{img/Screenshot 2024-12-04 045933.png} 
\label{fig:myPhoto1} 
\end{figure}

The output of the signal generator appears to be a relatively pure sinusoid according to the FFT, confirming the visual analysis. The FFT also shows that the signal is being output at the correct frequency of 5 kHz.
\\ 

Overall, the output of the signal generator is clean and accurate. However, there are minor discrepancies in the expected vs. observed amplitudes. This could be improved in revisions of this design.





\end{document}
